{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios'\n\nconst API_KEY = '44009462-82273816cd5912ea13bf70156';\nconst BASE_URL = 'https://pixabay.com/api/';\naxios.defaults.baseURL = BASE_URL;\n\nexport const fetchImages = async (query, page = 1, perPage = 15) => {\n  const response = await axios.get(BASE_URL, {\n    params: {\n      key: API_KEY,\n      q: query,\n      image_type: 'photo',\n      orientation: 'horizontal',\n      safesearch: true,\n      page: page,\n      per_page: perPage,\n    }\n  });\n  return response.data;\n} ","import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nexport const renderImages = (images) => {\n  \nreturn images.map(({ webformatURL, largeImageURL, tags, likes, views, comments, downloads }) => `\n    <li class=\"gallery-item\">\n      <a href=\"${largeImageURL}\" class=\"gallery-link\">\n        <img class=\"gallery-img\" src=\"${webformatURL}\" alt=\"${tags}\" width=\"360\" height=\"200\"/>\n      </a>\n      <div class=\"info\">\n        <p><b>Likes:</b> ${likes}</p>\n        <p><b>Views:</b> ${views}</p>\n        <p><b>Comments:</b> ${comments}</p>\n        <p><b>Downloads:</b> ${downloads}</p>\n      </div>\n    </li>\n  `).join('');\n};\n\nlet lightbox;\n  \nexport const initializeLightbox = () => {\n  if (lightbox) {\n    lightbox.refresh();\n  } else {\n    lightbox = new SimpleLightbox('.gallery a', {\n      captionsData: 'alt',\n      captionDelay: 250,\n    });\n  }\n};","import { fetchImages } from \"./js/pixabay-api.js\";\nimport { renderImages, initializeLightbox } from \"./js/render-functions.js\";\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nconst refsEl = {\n  searchForm: document.querySelector('.search-form'),\n  inputForm: document.querySelector('.form-input'),\n  searchBtn: document.querySelector('.form-button'),\n  gallery: document.querySelector('.gallery'),\n  loaderEl: document.querySelector('.loader'),\n  loadMoreBtn: document.querySelector('.load-more'),\n};\n\nconst { searchForm, inputForm, searchBtn, gallery, loaderEl, loadMoreBtn } = refsEl;\n\nlet query = '';\nlet page = 1;\nlet totalHits = 0;\n\nsearchForm.addEventListener('submit', onSearchFormSubmit);\nloadMoreBtn.addEventListener('click', onLoadMoreClick);\n\nasync function onSearchFormSubmit(event) {\n  event.preventDefault();\n  query = event.target.elements.search.value.trim();\n  if (query === '') {\n    gallery.innerHTML = '';\n    event.target.reset();\n    iziToast.show({\n      message: \"Input field cannot be empty\",\n      position: \"topRight\",\n      timeout: 2000,\n      backgroundColor: '#EF4040',\n      messageColor: '#FAFAFB',\n      messageSize: '16px',\n      messageLineHeight: '1.5',\n      class: 'error',\n    });\n    return;\n  }\n\n  gallery.innerHTML = '';\n  page = 1;\n  loadMoreBtn.classList.add('is-hidden');\n  loaderEl.classList.remove('is-hidden');\n\n  try {\n    const imagesData = await fetchImages(query, page);\n    totalHits = imagesData.totalHits;\n\n    if (totalHits === 0) {\n      iziToast.show({\n        message: \"Sorry, there are no images matching your search query. Please try again!\",\n        position: \"topRight\",\n        timeout: 2000,\n        backgroundColor: '#EF4040',\n        messageColor: '#FAFAFB',\n        messageSize: '16px',\n        messageLineHeight: '1.5',\n        class: 'error',\n      });\n      return;\n    }\n    gallery.innerHTML = renderImages(imagesData.hits);\n    initializeLightbox();\n    event.target.reset();\n\n    if (imagesData.hits.length < 15) {\n      iziToast.show({\n        message: \"We're sorry, but you've reached the end of search results.\",\n        position: \"topRight\",\n        timeout: 2000,\n        backgroundColor: '#EF4040',\n        messageColor: '#FAFAFB',\n        messageSize: '16px',\n        messageLineHeight: '1.5',\n        class: 'info',\n      });\n    } else {\n      loadMoreBtn.classList.remove('is-hidden');\n    }\n  } catch (error) {\n    console.log(error);\n    iziToast.show({\n      message: \"An error occurred while fetching images. Please try again.\",\n      position: \"topRight\",\n      timeout: 2000,\n      backgroundColor: '#EF4040',\n      messageColor: '#FAFAFB',\n      messageSize: '16px',\n      messageLineHeight: '1.5',\n      class: 'error',\n    });\n  } finally {\n    loaderEl.classList.add('is-hidden');\n  }\n}\n\nasync function onLoadMoreClick() {\n  page += 1;\n  loaderEl.classList.remove('is-hidden');\n\n  try {\n    const imagesData = await fetchImages(query, page);\n    gallery.innerHTML += renderImages(imagesData.hits);\n    initializeLightbox();\n    smoothScroll();\n\n    if (gallery.children.length >= totalHits) {\n      loadMoreBtn.classList.add('is-hidden');\n      iziToast.show({\n        message: \"We're sorry, but you've reached the end of search results.\",\n        position: \"topRight\",\n        timeout: 2000,\n        backgroundColor: '#EF4040',\n        messageColor: '#FAFAFB',\n        messageSize: '16px',\n        messageLineHeight: '1.5',\n        class: 'info',\n      });\n    }\n  } catch (error) {\n    console.log(error);\n    iziToast.show({\n      message: \"An error occurred while fetching images. Please try again.\",\n      position: \"topRight\",\n      timeout: 2000,\n      backgroundColor: '#EF4040',\n      messageColor: '#FAFAFB',\n      messageSize: '16px',\n      messageLineHeight: '1.5',\n      class: 'error',\n    });\n  } finally {\n    loaderEl.classList.add('is-hidden');\n  }\n}\n\nfunction smoothScroll() {\n  const { height: cardHeight } = document.querySelector('.gallery-item').getBoundingClientRect();\n  window.scrollBy({\n    top: cardHeight * 2,\n    behavior: 'smooth',\n  });\n}\n"],"names":["API_KEY","BASE_URL","axios","fetchImages","query","page","perPage","renderImages","images","webformatURL","largeImageURL","tags","likes","views","comments","downloads","lightbox","initializeLightbox","SimpleLightbox","refsEl","searchForm","inputForm","searchBtn","gallery","loaderEl","loadMoreBtn","totalHits","onSearchFormSubmit","onLoadMoreClick","event","iziToast","imagesData","error","smoothScroll","cardHeight"],"mappings":"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"}